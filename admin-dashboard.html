<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Admin Dashboard | HouseHero</title>
    <meta name="theme-color" content="#22c55e" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
      body { background: #f3f4f6; }
      .admin-layout { display: flex; min-height: 100vh; }
      .admin-sidebar { width: 220px; background: #22c55e; color: #fff; display: flex; flex-direction: column; padding: 2rem 1rem; }
      .admin-sidebar h2 { font-size: 1.5rem; margin-bottom: 2rem; text-align: center; letter-spacing: 1px; }
      .admin-nav { display: flex; flex-direction: column; gap: 1.2rem; }
      .admin-nav a { color: #fff; text-decoration: none; font-size: 1.1rem; padding: 0.7rem 1rem; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.7rem; }
      .admin-nav a.active, .admin-nav a:hover { background: #16a34a; }
      .admin-main { flex: 1; padding: 2.5rem 2rem; }
      .admin-widgets { display: flex; gap: 2rem; margin-bottom: 2.5rem; flex-wrap: wrap; }
      .admin-widget { background: #fff; border-radius: 12px; box-shadow: 0 2px 8px rgba(34,197,94,0.06); padding: 2rem 2.5rem; flex: 1 1 180px; min-width: 180px; text-align: center; }
      .admin-widget h3 { color: #22c55e; font-size: 1.2rem; margin-bottom: 0.5rem; }
      .admin-widget .widget-value { font-size: 2.1rem; font-weight: bold; color: #111; }
      .latest-bookings { background: #fff; border-radius: 12px; box-shadow: 0 2px 8px rgba(34,197,94,0.06); padding: 2rem; }
      .latest-bookings h4 { color: #22c55e; margin-bottom: 1.2rem; }
      table { width: 100%; border-collapse: collapse; }
      th, td { padding: 0.7rem; border-bottom: 1px solid #e5e7eb; text-align: left; }
      th { background: #22c55e; color: #fff; }
      tr:last-child td { border-bottom: none; }
      .admin-login { display: flex; flex-direction: column; align-items: center; margin-top: 8vh; }
      .admin-login input { padding: 0.7rem 1rem; border-radius: 8px; border: 1px solid #d1d5db; margin-bottom: 1rem; font-size: 1.1rem; }
      .admin-login button { padding: 0.7rem 2rem; border-radius: 8px; background: #22c55e; color: #fff; border: none; font-size: 1.1rem; cursor: pointer; }
      .admin-login .error { color: #ef4444; margin-top: 0.5rem; }
      @media (max-width: 900px) { .admin-widgets { flex-direction: column; gap: 1rem; } .admin-sidebar { width: 100px; padding: 1rem 0.3rem; } .admin-sidebar h2 { font-size: 1rem; } .admin-nav a { font-size: 0.95rem; padding: 0.5rem 0.5rem; } }
    </style>
  </head>
  <body class="light">
    <div class="admin-login" id="admin-login">
      <h2>Admin Login</h2>
      <input type="password" id="admin-password" placeholder="Enter password" />
      <button id="admin-login-btn">Login</button>
      <div class="error" id="admin-error" style="display:none;">Incorrect password.</div>
    </div>
    <div class="admin-layout" id="admin-content" style="display:none;">
      <aside class="admin-sidebar">
        <h2><i class="fa-solid fa-user-shield"></i> Admin</h2>
        <nav class="admin-nav">
          <a href="#" id="nav-dashboard" class="active"><i class="fa-solid fa-chart-line"></i> Dashboard</a>
          <a href="#" id="nav-bookings"><i class="fa-solid fa-calendar-check"></i> Bookings</a>
          <a href="#" id="nav-users"><i class="fa-solid fa-users"></i> Users</a>
          <a href="#" id="nav-services"><i class="fa-solid fa-broom"></i> Services</a>
        </nav>
      </aside>
      <main class="admin-main">
        <section id="dashboard-section">
          <div class="admin-widgets">
            <div class="admin-widget">
              <h3>Total Bookings</h3>
              <div class="widget-value" id="total-bookings">0</div>
            </div>
            <div class="admin-widget">
              <h3>Total Users</h3>
              <div class="widget-value" id="total-users">1</div>
            </div>
            <div class="admin-widget">
              <h3>Total Earnings</h3>
              <div class="widget-value" id="total-earnings">R0</div>
            </div>
          </div>
          <div class="latest-bookings">
            <h4>Latest Bookings</h4>
            <table>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Address</th>
                  <th>Date</th>
                  <th>Time</th>
                  <th>Service</th>
                  <th>Details</th>
                </tr>
              </thead>
              <tbody id="latest-bookings-table"></tbody>
            </table>
          </div>
        </section>
        <section id="bookings-section" style="display:none;">
          <h2 style="color:#22c55e;">All Bookings</h2>
          <table style="margin-top:1.5rem;">
            <thead>
              <tr>
                <th>Name</th>
                <th>Address</th>
                <th>Date</th>
                <th>Time</th>
                <th>Service</th>
                <th>Details</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="all-bookings-table"></tbody>
          </table>
        </section>
        <section id="users-section" style="display:none;">
          <h2 style="color:#22c55e;">Users</h2>
          <p>Coming soon...</p>
        </section>
        <section id="services-section" style="display:none;">
          <h2 style="color:#22c55e;">Services</h2>
          <p>Coming soon...</p>
        </section>
      </main>
    </div>
    <script>
      // Password protection
      document.getElementById('admin-login-btn').onclick = function() {
        const pw = document.getElementById('admin-password').value;
        if (pw === 'flower') {
          document.getElementById('admin-login').style.display = 'none';
          document.getElementById('admin-content').style.display = 'flex';
          loadDashboard();
          loadAllBookings();
        } else {
          document.getElementById('admin-error').style.display = 'block';
        }
      };
      // Sidebar navigation
      const navs = [
        { id: 'nav-dashboard', section: 'dashboard-section' },
        { id: 'nav-bookings', section: 'bookings-section' },
        { id: 'nav-users', section: 'users-section' },
        { id: 'nav-services', section: 'services-section' }
      ];
      navs.forEach(nav => {
        document.getElementById(nav.id).onclick = function(e) {
          e.preventDefault();
          navs.forEach(n => {
            document.getElementById(n.id).classList.remove('active');
            document.getElementById(n.section).style.display = 'none';
          });
          document.getElementById(nav.id).classList.add('active');
          document.getElementById(nav.section).style.display = '';
        };
      });
      // Dashboard widgets and latest bookings
      function loadDashboard() {
        const bookings = JSON.parse(localStorage.getItem('allBookings') || '[]');
        document.getElementById('total-bookings').textContent = bookings.length;
        document.getElementById('total-users').textContent = '1'; // Demo only
        document.getElementById('total-earnings').textContent = 'R' + (bookings.length * 500); // Demo: R500 per booking
        const latest = bookings.slice(-5).reverse();
        const table = document.getElementById('latest-bookings-table');
        if (latest.length === 0) {
          table.innerHTML = '<tr><td colspan="6">No bookings found.</td></tr>';
        } else {
          table.innerHTML = latest.map(b => `
            <tr>
              <td>${b.name}</td>
              <td>${b.address}</td>
              <td>${b.date}</td>
              <td>${b.time}</td>
              <td>${b.service}</td>
              <td>${b.details || '-'}</td>
            </tr>
          `).join('');
        }
      }
      // All bookings table
      function loadAllBookings() {
        let bookings = JSON.parse(localStorage.getItem('allBookings') || '[]');
        const table = document.getElementById('all-bookings-table');
        if (bookings.length === 0) {
          table.innerHTML = '<tr><td colspan="7">No bookings found.</td></tr>';
        } else {
          table.innerHTML = bookings.map((b, i) => `
            <tr>
              <td>${b.name}</td>
              <td>${b.address}</td>
              <td>${b.date}</td>
              <td>${b.time}</td>
              <td>${b.service}</td>
              <td>${b.details || '-'}</td>
              <td><button onclick="deleteBooking(${i})" style="color:#fff;background:#ef4444;border:none;padding:0.4rem 1rem;border-radius:6px;cursor:pointer;">Delete</button></td>
            </tr>
          `).join('');
        }
      }
      window.deleteBooking = function(idx) {
        let bookings = JSON.parse(localStorage.getItem('allBookings') || '[]');
        bookings.splice(idx, 1);
        localStorage.setItem('allBookings', JSON.stringify(bookings));
        loadDashboard();
        loadAllBookings();
      }
    </script>
  </body>
</html> 