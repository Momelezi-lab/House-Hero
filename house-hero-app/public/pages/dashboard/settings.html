<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>HouseHero | Settings</title>
    <!-- Web App Meta -->
    <meta name="theme-color" content="#22c55e" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body class="light">
    <button id="toggle-dark" class="dark-mode-toggle" title="Toggle Dark Mode">
      ‚òÄÔ∏è
    </button>
    <!-- Header -->
    <header class="header">
      <a href="#" class="menu-icon" id="menu-toggle">‚ò∞</a>
      <div class="header-content">
        <h1 class="main-title">Settings</h1>
        <p class="subtitle">Customize your experience</p>
      </div>
    </header>
    <!-- Sidebar Menu -->
    <aside id="sidebar-menu" class="sidebar-menu">
      <button class="close-btn" id="close-menu">√ó</button>
      <div class="sidebar-profile">
        <img
          src="https://randomuser.me/api/portraits/men/1.jpg"
          alt="User Avatar"
          class="sidebar-avatar"
        />
        <div class="sidebar-name">Apiwe Fuzile</div>
      </div>
      <nav class="sidebar-nav">
        <a href="../../index.html" class="sidebar-link">üè† home</a>
        <a
          href="../../pages/dashboard/profile.html"
          class="sidebar-link"
          >profile</a
        >
        <a
          href="../../pages/dashboard/settings.html"
          class="sidebar-link"
          >settings</a
        >
        <a
          href="../../pages/services/complaints.html"
          class="sidebar-link"
          >complaints</a
        >
        <a href="../../pages/info/contact.html" class="sidebar-link"
          >get in touch</a
        >
        <a href="../../pages/info/faq.html" class="sidebar-link"
          >F.A.Q</a
        >
        <a href="#" class="sidebar-link logout-link" onclick="handleLogout()"
          >‚éã logout</a
        >
      </nav>
    </aside>
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- Main Content -->
    <main class="main-section">
      <!-- App Preferences -->
      <div class="settings-section">
        <h2 class="section-title">App Preferences</h2>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Dark Mode</h3>
            <p>Use dark theme throughout the app</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="dark-mode-toggle" />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Auto-save Forms</h3>
            <p>Automatically save form data as you type</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="auto-save-toggle" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Location Services</h3>
            <p>Allow app to access your location for better service matching</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="location-toggle" />
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Notifications -->
      <div class="settings-section">
        <h2 class="section-title">Notifications</h2>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Push Notifications</h3>
            <p>Receive notifications about service updates</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="push-notifications-toggle" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Email Notifications</h3>
            <p>Receive service confirmations via email</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="email-notifications-toggle" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>SMS Notifications</h3>
            <p>Receive service updates via SMS</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="sms-notifications-toggle" />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Reminder Notifications</h3>
            <p>Get reminded about upcoming appointments</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="reminder-toggle" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Privacy & Security -->
      <div class="settings-section">
        <h2 class="section-title">Privacy & Security</h2>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Biometric Login</h3>
            <p>Use fingerprint or face ID to log in</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="biometric-toggle" />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Two-Factor Authentication</h3>
            <p>Add an extra layer of security to your account</p>
          </div>
          <button class="btn-secondary" onclick="setupTwoFactor()">
            Setup
          </button>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Data Sharing</h3>
            <p>Allow HouseHero to share data with service providers</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="data-sharing-toggle" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Service Preferences -->
      <div class="settings-section">
        <h2 class="section-title">Service Preferences</h2>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Preferred Service Time</h3>
            <p>Set your preferred time for service appointments</p>
          </div>
          <select id="preferred-time" class="setting-select">
            <option value="morning">Morning (8 AM - 12 PM)</option>
            <option value="afternoon" selected>Afternoon (12 PM - 4 PM)</option>
            <option value="evening">Evening (4 PM - 8 PM)</option>
            <option value="anytime">Anytime</option>
          </select>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Service Radius</h3>
            <p>Maximum distance for service providers</p>
          </div>
          <select id="service-radius" class="setting-select">
            <option value="5">5 km</option>
            <option value="10" selected>10 km</option>
            <option value="15">15 km</option>
            <option value="20">20 km</option>
          </select>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Auto-confirm Bookings</h3>
            <p>Automatically confirm bookings within your preferred time</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="auto-confirm-toggle" />
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Payment Settings -->
      <div class="settings-section">
        <h2 class="section-title">Payment Settings</h2>

        <div class="payment-methods">
          <div class="payment-method">
            <div class="payment-info">
              <span class="payment-icon">üí≥</span>
              <div>
                <h3>Visa ending in 1234</h3>
                <p>Expires 12/25</p>
              </div>
            </div>
            <button class="btn-secondary">Edit</button>
          </div>

          <div class="payment-method">
            <div class="payment-info">
              <span class="payment-icon">üè¶</span>
              <div>
                <h3>Bank Transfer</h3>
                <p>Standard Bank - 1234567890</p>
              </div>
            </div>
            <button class="btn-secondary">Edit</button>
          </div>

          <button class="btn-primary add-payment-btn">
            + Add Payment Method
          </button>
        </div>
      </div>

      <!-- Language & Region -->
      <div class="settings-section">
        <h2 class="section-title">Language & Region</h2>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Language</h3>
            <p>Choose your preferred language</p>
          </div>
          <select id="language-select" class="setting-select">
            <option value="en" selected>English</option>
            <option value="af">Afrikaans</option>
            <option value="zu">Zulu</option>
            <option value="xh">Xhosa</option>
          </select>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Currency</h3>
            <p>Select your preferred currency</p>
          </div>
          <select id="currency-select" class="setting-select">
            <option value="ZAR" selected>South African Rand (R)</option>
            <option value="USD">US Dollar ($)</option>
            <option value="EUR">Euro (‚Ç¨)</option>
          </select>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Time Zone</h3>
            <p>Set your local time zone</p>
          </div>
          <select id="timezone-select" class="setting-select">
            <option value="Africa/Johannesburg" selected>
              South Africa (GMT+2)
            </option>
            <option value="UTC">UTC (GMT+0)</option>
            <option value="America/New_York">Eastern Time (GMT-5)</option>
          </select>
        </div>
      </div>

      <!-- Data Management -->
      <div class="settings-section">
        <h2 class="section-title">Data Management</h2>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Export Data</h3>
            <p>Download a copy of your data</p>
          </div>
          <button class="btn-secondary" onclick="exportData()">Export</button>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Clear Cache</h3>
            <p>Clear app cache and temporary files</p>
          </div>
          <button class="btn-secondary" onclick="clearCache()">Clear</button>
        </div>

        <div class="setting-item danger-zone">
          <div class="setting-info">
            <h3>Delete Account</h3>
            <p>Permanently delete your account and all data</p>
          </div>
          <button class="btn-danger" onclick="showDeleteAccountModal()">
            Delete
          </button>
        </div>
      </div>
    </main>

    <!-- Delete Account Modal -->
    <div id="delete-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Delete Account</h2>
          <button class="close-modal" onclick="closeDeleteModal()">√ó</button>
        </div>
        <div class="modal-body">
          <p>
            Are you sure you want to delete your account? This action cannot be
            undone.
          </p>
          <p>
            All your data, including service history and preferences, will be
            permanently removed.
          </p>
        </div>
        <div class="modal-actions">
          <button class="btn-secondary" onclick="closeDeleteModal()">
            Cancel
          </button>
          <button class="btn-danger" onclick="deleteAccount()">
            Delete Account
          </button>
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="/js/config.js"></script>
    <script src="/js/script.js"></script>
    <script>
      // Settings page specific JavaScript
      document.addEventListener("DOMContentLoaded", function () {
        // Load saved settings
        loadSettings();

        // Add event listeners for all toggles
        const toggles = document.querySelectorAll(".toggle-switch input");
        toggles.forEach((toggle) => {
          toggle.addEventListener("change", function () {
            saveSetting(this.id, this.checked);
          });
        });

        // Add event listeners for selects
        const selects = document.querySelectorAll(".setting-select");
        selects.forEach((select) => {
          select.addEventListener("change", function () {
            saveSetting(this.id, this.value);
          });
        });
      });

      function loadSettings() {
        // Load dark mode setting
        const darkModeToggle = document.getElementById("dark-mode-toggle");
        const isDark = document.documentElement.classList.contains("dark");
        darkModeToggle.checked = isDark;

        // Load other settings from localStorage
        const settings = JSON.parse(
          localStorage.getItem("appSettings") || "{}"
        );

        Object.keys(settings).forEach((key) => {
          const element = document.getElementById(key);
          if (element) {
            if (element.type === "checkbox") {
              element.checked = settings[key];
            } else {
              element.value = settings[key];
            }
          }
        });
      }

      function saveSetting(key, value) {
        const settings = JSON.parse(
          localStorage.getItem("appSettings") || "{}"
        );
        settings[key] = value;
        localStorage.setItem("appSettings", JSON.stringify(settings));

        // Special handling for dark mode
        if (key === "dark-mode-toggle") {
          const html = document.documentElement;
          const toggleBtn = document.getElementById("toggle-dark");

          if (value) {
            html.classList.add("dark");
            toggleBtn.textContent = "üåô";
          } else {
            html.classList.remove("dark");
            toggleBtn.textContent = "‚òÄÔ∏è";
          }
          localStorage.setItem("theme", value ? "dark" : "light");
        }

        showToast("Setting saved successfully!", "success");
      }

      function setupTwoFactor() {
        showToast("Two-factor authentication setup would open here", "success");
      }

      function exportData() {
        showToast(
          "Data export started. You will receive an email shortly.",
          "success"
        );
      }

      function clearCache() {
        if (confirm("Are you sure you want to clear the app cache?")) {
          localStorage.removeItem("form_booking-form");
          showToast("Cache cleared successfully!", "success");
        }
      }

      function showDeleteAccountModal() {
        document.getElementById("delete-modal").style.display = "flex";
      }

      function closeDeleteModal() {
        document.getElementById("delete-modal").style.display = "none";
      }

      function deleteAccount() {
        if (confirm("This is your final warning. Are you absolutely sure?")) {
          localStorage.clear();
          showToast("Account deleted. Redirecting to login...", "success");
          setTimeout(() => {
            window.location.href = "login.html";
          }, 2000);
        }
      }

      // Close modal when clicking outside
      document
        .getElementById("delete-modal")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            closeDeleteModal();
          }
        });
    </script>
  </body>
</html>
